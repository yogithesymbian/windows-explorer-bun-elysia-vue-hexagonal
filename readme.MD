# ğŸ—‚ï¸ Windows Explorer Backend + Frontend

Backend API untuk aplikasi Windows Explorer-like berbasis web. Dibangun dengan arsitektur hexagonal (clean architecture), menggunakan Bun + Elysia + PostgreSQL + Redis, dan dioptimalkan untuk scalability.

### example for ltree
```
sequenceDiagram
  autonumber
  participant UI as Vue3 UI (composable/usecase FE)
  participant API as Elysia Controller
  participant UC as UseCase: SearchItems (BE)
  participant Cache as Redis
  participant Repo as Postgres (FTS)

  UI->>API: GET /search?q=<query>&scope=<ltree_scope>
  API->>UC: call SearchItems(q, scope)
  UC->>Cache: GET search:{scope}:{norm_q}
  alt miss cache
    UC->>Repo: SELECT ... WHERE path_ltree <@ scope
    UC->>Repo: AND search_vector @@ plainto_tsquery('simple', unaccent(q))
    Repo-->>UC: items[]
    UC->>Cache: SET search:{scope}:{norm_q} TTL=30s
  else hit cache
    Cache-->>UC: items[]
  end
  UC-->>API: items[]
  API-->>UI: 200 OK
```

## ğŸš€ Tech Stack
### Backend
- **Runtime**: Bun
- **Framework**: Elysia
- **Architecture**: Hexagonal / Clean Architecture
- **Database**: PostgreSQL + ltree + FTS (GIN index)
- **ORM**: Drizzle ORM
- **Caching**: Redis
- **Connection Pooling**: PgBouncer
- **Testing**: k6, wrk, Spectral, EXPLAIN ANALYZE
- **API Spec**: OpenAPI (Scalar) + Spectral linting
- **Monorepo**: explorer-api & explorer-infrastructure
### frontend
- **Runtime**: Bun
- **Library**: Vue3 + Naive UI (Scratch TreeNode)
- **Architecture**: Hexagonal / Clean Architecture
- **Testing**: 
- **Monorepo**: explorer-fe

## ğŸ“ Features

- Hierarchical folder structure with unlimited depth (ltree)
- Full-text search for files (FTS with GIN index)
- REST API with versioning and audit rules
- Redis caching for subtree and search results
- Connection pooling with PgBouncer for high concurrency
- Load testing with k6 and wrk
- Query profiling with EXPLAIN ANALYZE

## ğŸ“¸ Application Preview Gallery

### ğŸ”· Frontend Preview
| Screenshot | Screenshot |
|-----------|-----------|
| <a href="./docs/gallery/frontend-1.webp"><img src="./docs/gallery/frontend-1.webp" width="300" alt="Frontend UI 1"></a> | <a href="./docs/gallery/frontend-2.webp"><img src="./docs/gallery/frontend-2.webp" width="300" alt="Frontend UI 2"></a> |

> *Klik gambar untuk memperbesar*

---

### ğŸ”¶ Backend Preview
| Screenshot | Screenshot |
|-----------|-----------|
| <a href="./docs/gallery/backend-1.webp"><img src="./docs/gallery/backend-1.webp" width="300" alt="Backend 1"></a> | <a href="./docs/gallery/backend-2.webp"><img src="./docs/gallery/backend-2.webp" width="300" alt="Backend 2"></a> |

> *Klik gambar untuk memperbesar*

## ğŸ“¦ Folder Structure

```
ğŸ“¦backend
 â”— ğŸ“‚explorer
 â”ƒ â”£ ğŸ“‚api
 â”ƒ â”ƒ â”£ ğŸ“‚docs
 â”ƒ â”ƒ â”£ ğŸ“‚scripts
 â”ƒ â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚config
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚di
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚plugins
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚routes
 â”ƒ â”ƒ â”£ ğŸ“‚tests
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚load
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œk6-tree.js
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œwrk-tree.sh
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚query
 â”ƒ â”ƒ â”ƒ â”— ğŸ“œe2e.app.test.ts
 â”ƒ â”ƒ â”£ ğŸ“œ.spectral.yaml
 â”ƒ â”ƒ â”— ğŸ“œpackage.json
 â”ƒ â”£ ğŸ“‚application
 â”ƒ â”ƒ â”— ğŸ“‚src
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚dto
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚errors
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ports
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚usecases
 â”ƒ â”£ ğŸ“‚infrastructure
 â”ƒ â”ƒ â”£ ğŸ“‚db
 â”ƒ â”ƒ â”£ ğŸ“‚drizzle
 â”ƒ â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚adapter
 â”ƒ â”ƒ â”ƒ â”ƒ â”£ ğŸ“œfts.ts
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œredis.cache.ts
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚mappers
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚repositories
 â”ƒ â”ƒ â”£ ğŸ“‚tests
 â”ƒ â”£ ğŸ“‚reports
 â”ƒ â”ƒ â”— ğŸ“œjunit.xml
ğŸ“¦frontend
 â”— ğŸ“‚explorer
 â”ƒ â”£ ğŸ“‚src
 â”ƒ â”ƒ â”£ ğŸ“‚application
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚ports
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚stores
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚usecases
 â”ƒ â”ƒ â”£ ğŸ“‚domain
 â”ƒ â”ƒ â”£ ğŸ“‚infrastructure
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚api
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚core
 â”ƒ â”ƒ â”ƒ â”ƒ â”— ğŸ“œapi-client.ts
 â”ƒ â”ƒ â”£ ğŸ“‚presentation
 â”ƒ â”ƒ â”ƒ â”£ ğŸ“‚components
 â”ƒ â”ƒ â”ƒ â”— ğŸ“‚pages
 â”ƒ â”ƒ â”— ğŸ“‚shared
 â”ƒ â”£ ğŸ“œ.gitignore
 â”ƒ â”£ ğŸ“œREADME.md
 â”ƒ â”£ ğŸ“œbun.lock
 â”ƒ â”£ ğŸ“œindex.ts
 â”ƒ â”£ ğŸ“œpackage.json
 â”ƒ â”— ğŸ“œtsconfig.json
 â”ƒ â”£ ğŸ“œ.env
 â”ƒ â”£ ğŸ“œ.gitignore
 â”ƒ â”£ ğŸ“œREADME.md
 â”ƒ â”£ ğŸ“œbunfig.toml
 â”ƒ â”— ğŸ“œtsconfig.json
```

## ğŸ“„ API Spec

OpenAPI spec tersedia di `api/docs/openapi.json`, dilint dengan Spectral untuk memastikan standar REST (versioning, naming, method, etc).

## ğŸ§ª Load Testing

- `tests/load/k6-subtree.js`
- `tests/load/k6-search.js`
- `tests/load/wrk-subtree.sh`

## ğŸ“Š Query Profiling

- `tests/query/explain-subtree.sql`

## âœ… Requirements / Test By

### Runtime & OS
- **Bun** â‰¥ `1.2.22`
- **OS**: macOS

### Services
- **PostgreSQL**: `14`
  - Extensions: `ltree`
- **Redis** â‰¥ `7.2.7`

## ğŸ“Œ Setup

1. Clone repository:
```shell
git clone https://github.com/yogithesymbian/windows-explorer-bun-elysia-vue-hexagonal
```
2. go to directory `windows-explorer-bun-elysia-vue-hexagonal` and Install Package 
```shell
bun install
```
3. Setup ENV
```shell
bun run setup:env
```
4. Configuration Backend
```shell
bun run db:migrate
bun run db:seed
```
5. Running For Backend
```ts
bun run dev:api
```
```ts
$ bun --filter explorer-api --env-file=./backend/explorer/.env dev
explorer-api dev $ bun run --watch src/index.ts
â”‚ ğŸ¦Š Elysia running at http://localhost:8080
â”‚ ğŸ¦Š UI spec http://localhost:8080/docs
â”‚ ğŸ¦Š RAW spec http://localhost:8080/docs/openapi.json
â””â”€ Running...
```
6. Running For Frontend
```ts
bun run dev:fe
```
```ts
$ bun --filter explorer-fe --env-file=./frontend/explorer/.env dev
explorer-fe dev $ bun --bun vite
â”‚ 
â”‚   VITE v7.1.11  ready in 283 ms
â”‚ 
â”‚   âœ  Local:   http://localhost:5173/
â”‚   âœ  Network: use --host to expose
â””â”€ Running...
```




##  ğŸ§  Author
Yogi Arif Widodo